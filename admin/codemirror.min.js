window.CodeMirror=function(){function k(a,b){function c(e){(!j.onDragEvent||!j.onDragEvent(z,Sa(e)))&&db(e)}function d(e){return 0<=e&&e<o.size}function f(e){for(var a=o;!a.lines;)for(var n=0;;++n){var b=a.children[n],c=b.chunkSize();if(e<c){a=b;break}e-=c}return a.lines[e]}function h(e,a){ha=!0;for(var n=a-e.height,b=e;b;b=b.parent)b.height+=n}function g(e){var a={line:0,ch:0};L(a,{line:o.size-1,ch:f(o.size-1).text.length},Ta(e),a,a);pa=!0}function p(e){if(!j.onDragEvent||!j.onDragEvent(z,Sa(e))){D(e);
var a=Ua(e,!0),n=e.dataTransfer.files;if(a&&!j.readOnly)if(n&&n.length&&window.FileReader&&window.File)for(var b=n.length,c=Array(b),Va=0,e=function(e,n){var f=new FileReader;f.onload=function(){c[n]=f.result;++Va==b&&(a=v(a),l(function(){var e=I(c.join(""),a,a);ca(a,e)})())};f.readAsText(e)},f=0;f<b;++f)e(n[f],f);else if(!eb||A(a,i.from)||A(i.to,a))try{(c=e.dataTransfer.getData("Text"))&&lc(function(){var e=i.from,n=i.to;ca(a,a);eb&&I("",e,n);aa(c);V()})}catch(d){}}}function Mc(e){var a=fb();e.dataTransfer.setData("Text",
a);if(Ea||mc||qa)a=s("img"),a.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=",e.dataTransfer.setDragImage(a,0,0)}function Fa(e,a){if("string"==typeof e&&(e=nc[e],!e))return!1;var n=da;try{j.readOnly&&(gb=!0),a&&(da=null),e(z)}catch(b){if(b!=Kb)throw b;return!1}finally{da=n,gb=!1}return!0}function B(e){function a(){d=!0}var n=Lb(j.keyMap),b=n.auto;clearTimeout(oc);var c;if(c=b)c=xa[F(e,"keyCode")],c=!("Ctrl"==c||"Alt"==c||"Shift"==c||"Mod"==c);c&&(oc=setTimeout(function(){Lb(j.keyMap)==
n&&(j.keyMap=b.call?b.call(null,z):b)},50));c=xa[F(e,"keyCode")];var f=!1;if(null==c||e.altGraphKey)return!1;F(e,"altKey")&&(c="Alt-"+c);F(e,"ctrlKey")&&(c="Ctrl-"+c);F(e,"metaKey")&&(c="Cmd-"+c);var d=!1,f=F(e,"shiftKey")?hb("Shift-"+c,j.extraKeys,j.keyMap,function(e){return Fa(e,!0)},a)||hb(c,j.extraKeys,j.keyMap,function(e){if("string"==typeof e&&/^go[A-Z]/.test(e))return Fa(e)},a):hb(c,j.extraKeys,j.keyMap,Fa,a);d&&(f=!1);f&&(D(e),ib(),ya&&(e.oldKeyCode=e.keyCode,e.keyCode=0));return f}function pc(e){R||
Ga();ya&&27==e.keyCode&&(e.returnValue=!1);Ha&&ea()&&(Ha=!1);if(!j.onKeyEvent||!j.onKeyEvent(z,Sa(e))){var a=F(e,"keyCode");Da(16==a||F(e,"shiftKey"));var n=B(e);qa&&(Mb=n?a:null,!n&&(88==a&&F(e,Nb?"metaKey":"ctrlKey"))&&aa(""))}}function Ga(){if("nocursor"!=j.readOnly){if(!R){if(j.onFocus)j.onFocus(z);R=!0;-1==m.className.search(/\bCodeMirror-focused\b/)&&(m.className+=" CodeMirror-focused");Wa||jb(!0)}kb();ib()}}function Ob(){if(R){if(j.onBlur)j.onBlur(z);R=!1;ra&&l(function(){ra&&(ra(),ra=null)})();
m.className=m.className.replace(" CodeMirror-focused","")}clearInterval(Pb);setTimeout(function(){R||(da=null)},150)}function L(e,a,n,b,c){if(!gb){if(G){var f=[];o.iter(e.line,a.line+1,function(e){f.push(e.text)});for(G.addChange(e.line,n.length,f);G.done.length>j.undoDepth;)G.done.shift()}J(e,a,n,b,c)}}function qc(e,a){if(e.length){for(var n=e.pop(),b=[],c=n.length-1;0<=c;c-=1){var d=n[c],O=[],j=d.start+d.added;o.iter(d.start,j,function(e){O.push(e.text)});b.push({start:d.start,added:d.old.length,
old:O});var i=d.start+d.old.length-1,h;h=O[O.length-1];var g=d.old[d.old.length-1];if(g)if(h){for(var m=h.length,l=g.length;0<=m&&0<=l&&h.charAt(m)==g.charAt(l);--m,--l);h=l+1}else h=g.length;else h=0;i={line:i,ch:h};J({line:d.start,ch:0},{line:j-1,ch:f(j-1).text.length},d.old,i,i)}pa=!0;a.push(b)}}function J(e,a,n,b,c){if(!gb){var d=!1,O=ia.text.length;j.lineWrapping||o.iter(e.line,a.line+1,function(e){if(!e.hidden&&e.text.length==O)return d=!0});if(e.line!=a.line||1<n.length)ha=!0;var W=a.line-
e.line,g=f(e.line),x=f(a.line);if(0==e.ch&&0==a.ch&&""==n[n.length-1]){var y=[],g=null;e.line?(g=f(e.line-1),g.fixMarkEnds(x)):x.fixMarkStarts();for(var l=0,S=n.length-1;l<S;++l)y.push(ba.inheritMarks(n[l],g));W&&o.remove(e.line,W,Xa);y.length&&o.insert(e.line,y)}else if(g==x)if(1==n.length)g.replace(e.ch,a.ch,n[0]);else{x=g.split(a.ch,n[n.length-1]);g.replace(e.ch,null,n[0]);g.fixMarkEnds(x);y=[];l=1;for(S=n.length-1;l<S;++l)y.push(ba.inheritMarks(n[l],g));y.push(x);o.insert(e.line+1,y)}else if(1==
n.length)g.replace(e.ch,null,n[0]),x.replace(null,a.ch,""),g.append(x),o.remove(e.line+1,W,Xa);else{y=[];g.replace(e.ch,null,n[0]);x.replace(null,a.ch,n[n.length-1]);g.fixMarkEnds(x);l=1;for(S=n.length-1;l<S;++l)y.push(ba.inheritMarks(n[l],g));1<W&&o.remove(e.line+1,W-1,Xa);o.insert(e.line+1,y)}if(j.lineWrapping){var p=Math.max(5,m.clientWidth/lb()-3);o.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var a=Math.ceil(e.text.length/p)||1;a!=e.height&&h(e,a)}})}else o.iter(e.line,e.line+n.length,
function(e){var a=e.text;!e.hidden&&a.length>O&&(ia=e,O=a.length,mb=!0,d=!1)}),d&&(Ya=!0);x=[];W=n.length-W-1;l=0;for(y=ja.length;l<y;++l)S=ja[l],S<e.line?x.push(S):S>a.line&&x.push(S+W);var l=e.line+Math.min(n.length,500),y=e.line,s=nb(y);o.iter(y,l,function(e){e.highlight(E,s,j.tabSize);e.stateAfter=Ia(E,s)});x.push(l);ja=x;Qb(100);fa.push({from:e.line,to:a.line+1,diff:W});e={from:e,to:a,text:n};if(Ja){for(n=Ja;n.next;n=n.next);n.next=e}else Ja=e;Za(v(b),v(c),i.from.line<=Math.min(a.line,a.line+
W)?i.from.line:i.from.line+W,i.to.line<=Math.min(a.line,a.line+W)?i.to.line:i.to.line+W)}}function U(){var e=o.height*ka()+2*w.offsetTop;return 0.99*e>m.offsetHeight?e:!1}function T(e){var a=U();r.style.display=a?"block":"none";a?(rc.style.height=la.style.minHeight=a+"px",r.style.height=m.clientHeight+"px",null!=e&&(r.scrollTop=m.scrollTop=e,ob&&setTimeout(function(){r.scrollTop==e&&(r.scrollTop=e+(e?-1:1),r.scrollTop=e)},0))):la.style.minHeight="";pb.style.top=Ka*ka()+"px"}function X(){ia=f(0);mb=
!0;var e=ia.text.length;o.iter(1,o.size,function(a){var n=a.text;!a.hidden&&n.length>e&&(e=n.length,ia=a)});Ya=!1}function I(e,a,n){function b(f){if(A(f,a))return f;if(!A(n,f))return c;var d=f.line+e.length-(n.line-a.line)-1,Jb=f.ch;f.line==n.line&&(Jb+=e[e.length-1].length-(n.ch-(n.line==a.line?a.ch:0)));return{line:d,ch:Jb}}var a=v(a),n=n?v(n):a,e=Ta(e),c;Y(e,a,n,function(e){c=e;return{from:b(i.from),to:b(i.to)}});return c}function aa(e,a){Y(Ta(e),i.from,i.to,function(e){return"end"==a?{from:e,
to:e}:"start"==a?{from:i.from,to:i.from}:{from:i.from,to:e}})}function Y(e,a,n,b){b=b({line:a.line+e.length-1,ch:1==e.length?e[0].length+a.ch:e[e.length-1].length});L(a,n,e,b.from,b.to)}function ga(e,a,b){var c=e.line,d=a.line;if(c==d)return f(c).text.slice(e.ch,a.ch);var Va=[f(c).text.slice(e.ch)];o.iter(c+1,d,function(e){Va.push(e.text)});Va.push(f(d).text.slice(0,a.ch));return Va.join(b||"\n")}function fb(e){return ga(i.from,i.to,e)}function kb(){Ha||Rb.set(j.pollInterval,function(){Sb();ea();
R&&kb();Tb()})}function $a(){function e(){Sb();!ea()&&!a?(a=!0,Rb.set(60,e)):(Ha=!1,kb());Tb()}var a=!1;Ha=!0;Rb.set(20,e)}function ea(){if(Wa||!R||Nc(t)||j.readOnly)return!1;var e=t.value;if(e==ma)return!1;da=null;for(var a=0,b=Math.min(ma.length,e.length);a<b&&ma[a]==e[a];)++a;a<ma.length?i.from={line:i.from.line,ch:i.from.ch-(ma.length-a)}:qb&&u(i.from,i.to)&&(i.to={line:i.to.line,ch:Math.min(f(i.to.line).text.length,i.to.ch+(e.length-a))});aa(e.slice(a),"end");1E3<e.length?t.value=ma="":ma=e;
return!0}function jb(e){u(i.from,i.to)?e&&(ma=t.value=""):(ma="",t.value=fb(),R&&sc(t))}function V(){"nocursor"!=j.readOnly&&t.focus()}function tc(){var e=na(i.inverted?i.from:i.to);return{x:j.lineWrapping?Math.min(e.x,w.offsetWidth):e.x,y:e.y,yBot:e.yBot}}function uc(e,a,b,c){e=vc(e,a,b,c);null!=e.scrollLeft&&(m.scrollLeft=e.scrollLeft);null!=e.scrollTop&&(r.scrollTop=m.scrollTop=e.scrollTop)}function vc(e,a,b,c){var f=w.offsetLeft,d=w.offsetTop,a=a+d,c=c+d,e=e+f,b=b+f,O=m.clientHeight,i=r.scrollTop,
h={},g=U()||Infinity,l=a<d+10,d=c+d>g-10;a<i?h.scrollTop=l?0:Math.max(0,a):c>i+O&&(h.scrollTop=(d?g:c)-O);a=m.clientWidth;c=m.scrollLeft;O=j.fixedGutter?P.clientWidth:0;f=e<O+f+10;e<c+O||f?(f&&(e=0),h.scrollLeft=Math.max(0,e-10-O)):b>a+c-3&&(h.scrollLeft=b+10-a);return h}function wa(e){var a=ka(),b=(null!=e?e:r.scrollTop)-w.offsetTop,e=Math.max(0,Math.floor(b/a)),a=Math.ceil((b+m.clientHeight)/a);return{from:Ub(o,e),to:Ub(o,a)}}function sa(e,a,b){function c(){var e=Z.firstChild,a=!1;o.iter(C,Q,function(b){if(e){if(!b.hidden){var n=
Math.round(e.offsetHeight/q)||1;b.height!=n&&(h(b,n),ha=a=!0)}e=e.nextSibling}});return a}if(m.clientWidth){var f=wa(b);if(!0!==e&&0==e.length&&f.from>C&&f.to<Q)T(b);else{var d=Math.max(f.from-100,0),i=Math.min(o.size,f.to+100);C<d&&20>d-C&&(d=C);Q>i&&20>Q-i&&(i=Math.min(o.size,Q));if(!0===e)e=[];else{for(var f=[{from:C,to:Q,domStart:0}],g=0,l=e.length||0;g<l;++g){for(var x=e[g],y=[],p=x.diff||0,S=0,k=f.length;S<k;++S){var t=f[S];x.to<=t.from&&x.diff?y.push({from:t.from+p,to:t.to+p,domStart:t.domStart}):
x.to<=t.from||x.from>=t.to?y.push(t):(x.from>t.from&&y.push({from:t.from,to:x.from,domStart:t.domStart}),x.to<t.to&&y.push({from:x.to+p,to:t.to+p,domStart:t.domStart+(x.to-t.from)}))}f=y}e=f}for(var M=e,f=e=0;f<M.length;++f)g=M[f],g.from<d&&(g.domStart+=d-g.from,g.from=d),g.to>i&&(g.to=i),g.from>=g.to?M.splice(f--,1):e+=g.to-g.from;if(e==i-d&&d==C&&i==Q)T(b);else{M.sort(function(e,a){return e.domStart-a.domStart});var q=ka(),e=P.style.display;Z.style.display="none";f=d;g=i;l=function(e){var a=e.nextSibling;
e.parentNode.removeChild(e);return a};if(M.length){for(var x=0,r=Z.firstChild,y=0;y<M.length;++y){for(p=M[y];p.domStart>x;)r=l(r),x++;for(var v=0,p=p.to-p.from;v<p;++v)r=r.nextSibling,x++}for(;r;)r=l(r)}else za(Z);var w=M.shift(),r=Z.firstChild,v=f;o.iter(f,g,function(e){w&&w.to==v&&(w=M.shift());if(!w||w.from>v){if(e.hidden)var a=s("pre");else if(a=e.getElement(wc),e.className&&(a.className=e.className),e.bgClassName)e=s("pre","\u00a0",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2"),
a=s("div",[e,a],null,"position: relative");Z.insertBefore(a,r)}else r=r.nextSibling;++v});Z.style.display=P.style.display="";(f=d!=C||i!=Q||xc!=m.clientHeight+q)&&(xc=m.clientHeight+q);(d!=C||i!=Q&&j.onViewportChange)&&setTimeout(function(){if(j.onViewportChange)j.onViewportChange(z,d,i)});C=d;Q=i;Ka=Vb(o,d);if(Z.childNodes.length!=Q-C)throw Error("BAD PATCH! "+JSON.stringify(M)+" size="+(Q-C)+" nodes="+Z.childNodes.length);j.lineWrapping&&c();P.style.display=e;(f||ha)&&va()&&j.lineWrapping&&c()&&
va();T(b);Ba();if(!a&&j.onUpdate)j.onUpdate(z);return!0}}}else C=Q=Ka=0}function va(){if(j.gutter||j.lineNumbers){var e=pb.offsetHeight,a=m.clientHeight;P.style.height=(2>e-a?a:e)+"px";var b=document.createDocumentFragment(),c=C,f;o.iter(C,Math.max(Q,C+1),function(e){if(e.hidden)b.appendChild(s("pre"));else{var a=e.gutterMarker,H=j.lineNumbers?j.lineNumberFormatter(c+j.firstLineNumber):null;a&&a.text?H=a.text.replace("%N%",null!=H?H:""):null==H&&(H="\u00a0");var d=b.appendChild(s("pre",null,a&&a.style));
d.innerHTML=H;for(H=1;H<e.height;++H)d.appendChild(s("br")),d.appendChild(document.createTextNode("\u00a0"));a||(f=c)}++c});P.style.display="none";za(La).appendChild(b);if(null!=f&&j.lineNumbers){for(var e=La.childNodes[f-C],a=String(o.size).length,d=e.firstChild.textContent||e.firstChild.innerText||e.firstChild.nodeValue||"",i="";d.length+i.length<a;)i+="\u00a0";i&&e.insertBefore(document.createTextNode(i),e.firstChild)}P.style.display="";e=2<Math.abs((parseInt(w.style.marginLeft)||0)-P.offsetWidth);
w.style.marginLeft=P.offsetWidth+"px";ha=!1;return e}}function Ba(){var e=u(i.from,i.to),a=na(i.from,!0),b=e?a:na(i.to,!0),c=i.inverted?a:b,f=ka(),d=Ma(N),g=Ma(Z);Aa.style.top=Math.max(0,Math.min(m.offsetHeight,c.y+g.top-d.top))+"px";Aa.style.left=Math.max(0,Math.min(m.offsetWidth,c.x+g.left-d.left))+"px";if(e)K.style.top=c.y+"px",K.style.left=(j.lineWrapping?Math.min(c.x,w.offsetWidth):c.x)+"px",K.style.display="",rb.style.display="none";else{var e=a.y==b.y,h=document.createDocumentFragment(),l=
w.clientWidth||w.offsetWidth,c=w.clientHeight||w.offsetHeight,d=function(e,a,b,n){h.appendChild(s("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+a+"px; "+(Oc?"width: "+(!b?l:l-b-e)+"px":"right: "+b+"px")+"; height: "+n+"px"))};i.from.ch&&0<=a.y&&d(a.x,a.y,e?l-b.x:0,f);a=Math.max(0,a.y+(i.from.ch?f:0));g=Math.min(b.y,c)-a;g>0.2*f&&d(0,a,0,g);(!e||!i.from.ch)&&b.y<c-0.5*f&&d(0,b.y,l-b.x,f);za(rb).appendChild(h);K.style.display="none";rb.style.display=""}}function Da(e){da=
e?da||(i.inverted?i.to:i.from):null}function ca(e,a){var b=da&&v(da);b&&(A(b,e)?e=b:A(a,b)&&(a=b));Za(e,a);sb=!0}function Za(e,a,b,c){tb=null;null==b&&(b=i.from.line,c=i.to.line);if(!u(i.from,e)||!u(i.to,a)){if(A(a,e))var d=a,a=e,e=d;e.line!=b&&((b=ub(e,b,i.from.ch))?e=b:Wb(e.line,!1));a.line!=c&&(a=ub(a,c,i.to.ch));u(e,a)?i.inverted=!1:u(e,i.to)?i.inverted=!1:u(a,i.from)&&(i.inverted=!0);if(j.autoClearEmptyLines&&u(i.from,i.to)&&(i.inverted?e:a).line!=i.from.line&&i.from.line<o.size){var g=f(i.from.line);
/^\s+$/.test(g.text)&&setTimeout(l(function(){if(g.parent&&/^\s+$/.test(g.text)){var e=Na(g);I("",{line:e,ch:0},{line:e,ch:g.text.length})}},10))}i.from=e;i.to=a;ta=!0}}function ub(e,a,b){function c(a){for(var H=e.line+a,d=1==a?o.size:-1;H!=d;){var i=f(H);if(!i.hidden){a=e.ch;if(g||a>b||a>i.text.length)a=i.text.length;return{line:H,ch:a}}H+=a}}var d=f(e.line),g=e.ch==d.text.length&&e.ch!=b;return!d.hidden?e:e.line>=a?c(1)||c(-1):c(-1)||c(1)}function ua(a,b,c){a=v({line:a,ch:b||0});(c?ca:Za)(a,a)}
function vb(a){return Math.max(0,Math.min(a,o.size-1))}function v(a){if(0>a.line)return{line:0,ch:0};if(a.line>=o.size)return{line:o.size-1,ch:f(o.size-1).text.length};var b=a.ch,c=f(a.line).text.length;return null==b||b>c?{line:a.line,ch:c}:0>b?{line:a.line,ch:0}:a}function Ca(a,b){function c(b){if(h==(0>a?0:j.text.length)){if(b=!b)a:{for(var b=g+a,n=0>a?-1:o.size;b!=n;b+=a){var d=f(b);if(!d.hidden){g=b;j=d;b=!0;break a}}b=void 0}if(b)h=0>a?j.text.length:0;else return!1}else h+=a;return!0}var d=
i.inverted?i.from:i.to,g=d.line,h=d.ch,j=f(g);if("char"==b)c();else if("column"==b)c(!0);else if("word"==b)for(d=!1;!(0>a)||c();){if(wb(j.text.charAt(h)))d=!0;else if(d){0>a&&(a=1,c());break}if(0<a&&!c())break}return{line:g,ch:h}}function Qa(a){var b=f(a.line).text,c=a.ch,d=a.ch;if(b){!1===a.after||d==b.length?--c:++d;for(var g=b.charAt(c),g=wb(g)?wb:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!wb(a)};0<c&&g(b.charAt(c-1));)--c;for(;d<b.length&&g(b.charAt(d));)++d}return{from:{line:a.line,
ch:c},to:{line:a.line,ch:d}}}function xb(a,b){b||(b="add");if("smart"==b)if(E.indent)var c=nb(a);else b="prev";var d=f(a),g=d.indentation(j.tabSize),i=d.text.match(/^\s*/)[0],h;"smart"==b&&(h=E.indent(c,d.text.slice(i.length),d.text),h==Kb&&(b="prev"));"prev"==b?h=a?f(a-1).indentation(j.tabSize):0:"add"==b?h=g+j.indentUnit:"subtract"==b&&(h=g-j.indentUnit);h=Math.max(0,h);c="";d=0;if(j.indentWithTabs)for(g=Math.floor(h/j.tabSize);g;--g)d+=j.tabSize,c+="\t";for(;d<h;)++d,c+=" ";c!=i&&I(c,{line:a,ch:0},
{line:a,ch:i.length})}function Ra(){E=k.getMode(j,j.mode);o.iter(0,o.size,function(a){a.stateAfter=null});ja=[0];Qb()}function Ib(){if(j.lineWrapping){N.className+=" CodeMirror-wrap";var a=m.clientWidth/lb()-3;o.iter(0,o.size,function(b){if(!b.hidden){var c=Math.ceil(b.text.length/a)||1;1!=c&&h(b,c)}});w.style.minWidth=yb.style.left=""}else N.className=N.className.replace(" CodeMirror-wrap",""),X(),o.iter(0,o.size,function(a){1!=a.height&&!a.hidden&&h(a,1)});fa.push({from:0,to:o.size})}function wc(a){var a=
j.tabSize-a%j.tabSize,b=yc[a];if(b)return b;for(var b="",c=0;c<a;++c)b+=" ";b=s("span",b,"cm-tab");return yc[a]={element:b,width:a}}function zc(){m.className=m.className.replace(/\s*cm-s-\S+/g,"")+j.theme.replace(/(^|\s)\s*/g," cm-s-")}function Ac(){var a=$[j.keyMap].style;N.className=N.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function Xb(){this.set=[]}function Yb(a,b,c){function d(a,e,b,c){f(a).addMark(new zb(e,b,c,g))}var a=v(a),b=v(b),g=new Xb;if(!A(a,b))return g;if(a.line==
b.line)d(a.line,a.ch,b.ch,c);else{d(a.line,a.ch,null,c);for(var i=a.line+1,h=b.line;i<h;++i)d(i,null,null,c);d(b.line,null,b.ch,c)}fa.push({from:a.line,to:b.line+1});return g}function Bc(a,b){var c=a,d=a;"number"==typeof a?d=f(vb(a)):c=Na(a);if(null!=c&&b(d,c))fa.push({from:c,to:c+1});else return null;return d}function Wb(a,b){return Bc(a,function(a,e){if(a.hidden!=b){a.hidden=b;j.lineWrapping||(b&&a.text.length==ia.text.length?Ya=!0:!b&&a.text.length>ia.text.length&&(ia=a,Ya=!1));h(a,b?0:1);var c=
i.from.line,d=i.to.line;if(b&&(c==e||d==e)){c=c==e?ub({line:c,ch:0},c,0):i.from;d=d==e?ub({line:d,ch:0},d,0):i.to;if(!d)return;Za(c,d)}return ha=!0}})}function Zb(a,b){if(0==b)return{top:0,left:0};var c=j.lineWrapping&&b<a.text.length&&Ab.test(a.text.slice(b-1,b+1)),c=a.getElement(wc,b,c);za(Oa).appendChild(c);var c=c.anchor,d=c.offsetTop,f=c.offsetLeft;ya&&(0==d&&0==f)&&(d=s("span","x"),c.parentNode.insertBefore(d,c.nextSibling),d=d.offsetTop);return{top:d,left:f}}function na(a,b){var c,d=ka(),g=
d*(Vb(o,a.line)-(b?Ka:0));if(0==a.ch)c=0;else{var i=Zb(f(a.line),a.ch);c=i.left;j.lineWrapping&&(g+=Math.max(0,i.top))}return{x:c,y:g,yBot:g+d}}function Bb(a,b){function c(a){a=Zb(l,a);if(t){var e=Math.round(a.top/d);s=e!=y;return Math.max(0,a.left+(e-y)*m.clientWidth)}return a.left}var d=ka(),g=lb(),i=Ka+Math.floor(b/d);if(0>i)return{line:0,ch:0};var h=Ub(o,i);if(h>=o.size)return{line:o.size-1,ch:f(o.size-1).text.length};var l=f(h),p=l.text,t=j.lineWrapping,y=t?i-Vb(o,h):0;if(0>=a&&0==y)return{line:h,
ch:0};for(var s=!1,r=i=0,p=p.length,k,g=Math.min(p,Math.ceil((a+0.9*y*m.clientWidth)/g));;){var q=c(g);if(q<=a&&g<p)g=Math.min(p,Math.ceil(1.2*g));else{k=q;p=g;break}}if(a>k)return{line:h,ch:p};g=Math.floor(0.8*p);q=c(g);q<a&&(i=g,r=q);for(;;){if(1>=p-i)return k=a-r<k-a,{line:h,ch:k?i:p,after:k};g=Math.ceil((i+p)/2);q=c(g);q>a?(p=g,k=q,s&&(k+=1E3)):(i=g,r=q)}}function ka(){if(null==Pa){Pa=s("pre");for(var a=0;49>a;++a)Pa.appendChild(document.createTextNode("x")),Pa.appendChild(s("br"));Pa.appendChild(document.createTextNode("x"))}a=
Z.clientHeight;if(a==Cc)return $b;Cc=a;a=Pa.cloneNode(!0);za(Oa).appendChild(a);$b=Oa.firstChild.offsetHeight/50||1;za(Oa);return $b}function lb(){if(m.clientWidth==Dc)return Ec;Dc=m.clientWidth;var a=s("span","x"),b=s("pre",[a]);za(Oa).appendChild(b);return Ec=a.offsetWidth||10}function Ua(a,b){var c=Ma(m,!0),d,f;try{d=a.clientX,f=a.clientY}catch(g){return null}if(!b&&(d-c.left>m.clientWidth||f-c.top>m.clientHeight))return null;c=Ma(w,!0);return Bb(d-c.left,f-c.top)}function Fc(a){function b(){var a=
Ta(t.value).join("\n");a!=g&&!j.readOnly&&l(aa)(a,"end");Aa.style.position="relative";t.style.cssText=f;ac&&(r.scrollTop=d);Wa=!1;jb(!0);kb()}var c=Ua(a),d=r.scrollTop;if(c&&!qa){(u(i.from,i.to)||A(c,i.from)||!A(c,i.to))&&l(ua)(c.line,c.ch);var f=t.style.cssText;Aa.style.position="absolute";t.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
Wa=!0;var g=t.value=fb();V();sc(t);if(Ea){db(a);var h=q(window,"mouseup",function(){h();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function ib(){clearInterval(Pb);var a=!0;K.style.visibility="";Pb=setInterval(function(){K.style.visibility=(a=!a)?"":"hidden"},j.cursorBlinkRate)}function Gc(a){var b=i.inverted?i.from:i.to,c=f(b.line),d=b.ch-1,g=0<=d&&bc[c.text.charAt(d)]||bc[c.text.charAt(++d)];if(g){g.charAt(0);for(var h=(g=">"==g.charAt(1))?1:-1,j=c.styles,p=d+1,m=0,t=j.length;m<t;m+=2)if(0>=(p-=
j[m].length)){var k=j[m+1];break}j=[c.text.charAt(d)];p=/[(){}[\]]/;m=b.line;for(t=g?Math.min(m+100,o.size):Math.max(-1,m-100);m!=t;m+=h){var c=f(m),s=m==b.line,r;a:{r=s&&g?d+1:0;s=s&&!g?d:c.text.length;if(c.text)for(var q=c.styles,c=g?0:c.text.length-1,v=void 0,M=g?0:q.length-2,w=g?q.length:-2;M!=w;M+=2*h){var z=q[M];if(q[M+1]!=k)c+=h*z.length;else for(var ea=g?0:z.length-1,V=g?z.length:-1;ea!=V;ea+=h,c+=h)if(c>=r&&c<s&&p.test(v=z.charAt(ea))){var C=bc[v];if(">"==C.charAt(1)==g)j.push(v);else if(j.pop()!=
C.charAt(0)){r={pos:c,match:!1};break a}else if(!j.length){r={pos:c,match:!0};break a}}}r=void 0}if(r)break}r||(r={pos:null,match:!1});var k=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",E=Yb({line:b.line,ch:d},{line:b.line,ch:d+1},k),u=null!=r.pos&&Yb({line:m,ch:r.pos},{line:m,ch:r.pos+1},k),b=l(function(){E.clear();u&&u.clear()});a?setTimeout(b,800):ra=b}}function Hc(a){for(var b,c,d=a,a=a-40;d>a;--d){if(0==d)return 0;var g=f(d-1);if(g.stateAfter)return d;g=g.indentation(j.tabSize);
if(null==c||b>g)c=d-1,b=g}return c}function nb(a){var b=Hc(a),c=b&&f(b-1).stateAfter,c=c?Ia(E,c):cc(E);o.iter(b,a,function(a){a.highlight(E,c,j.tabSize);a.stateAfter=Ia(E,c)});b<a&&fa.push({from:b,to:a});a<o.size&&!f(a).stateAfter&&ja.push(a);return c}function kc(){for(var a=+new Date+j.workTime,b=ja.length;ja.length;){var c=f(C).stateAfter?ja.pop():C;if(!(c>=o.size)){var d=Hc(c),g=d&&f(d-1).stateAfter,g=g?Ia(E,g):cc(E),i=0,h=E.compareStates,l=!1,m=d,p=!1;o.iter(m,o.size,function(b){var d=b.stateAfter;
if(+new Date>a)return ja.push(m),Qb(j.workDelay),l&&fa.push({from:c,to:m+1}),p=!0;var f=b.highlight(E,g,j.tabSize);f&&(l=!0);b.stateAfter=Ia(E,g);b=null;if(h){var H=d&&h(d,g);H!=Kb&&(b=!!H)}if(null==b)if(!1!==f||!d)i=0;else if(3<++i&&(!E.indent||E.indent(d,"")==E.indent(g,"")))b=!0;if(b)return!0;++m});if(p)return;l&&fa.push({from:c,to:m+1})}}if(b&&j.onHighlightComplete)j.onHighlightComplete(z)}function Qb(a){ja.length&&Pc.set(a,l(kc))}function Sb(){pa=sb=Ja=null;fa=[];ta=!1;Xa=[]}function Tb(){Ya&&
X();if(mb&&!j.lineWrapping){var a=yb.offsetWidth,b=Zb(ia,ia.text.length).left;dc||(yb.style.left=b+"px",w.style.minWidth=b+a+"px");mb=!1}var c,d;ta&&(a=tc(),c=vc(a.x,a.y,a.x,a.yBot));if(fa.length||c&&null!=c.scrollTop)d=sa(fa,!0,c&&c.scrollTop);d||(ta&&Ba(),ha&&va());if(c&&(a=tc(),uc(a.x,a.y,a.x,a.yBot),R)){c=la.getBoundingClientRect();b=null;if(0>a.y+c.top)b=!0;else if(a.y+c.top+ka()>(window.innerHeight||document.documentElement.clientHeight))b=!1;if(null!=b){if(c="none"==K.style.display)K.style.display=
"",K.style.left=a.x+"px",K.style.top=a.y-Ka+"px";K.scrollIntoView(b);c&&(K.style.display="none")}}ta&&ib();R&&(!Wa&&(!0===pa||!1!==pa&&ta))&&jb(sb);ta&&j.matchBrackets&&setTimeout(l(function(){if(ra){ra();ra=null}u(i.from,i.to)&&Gc(false)}),20);b=ta;a=Xa;if(Ja&&j.onChange&&z)j.onChange(z,Ja);if(b&&j.onCursorActivity)j.onCursorActivity(z);for(b=0;b<a.length;++b)a[b](z);if(d&&j.onUpdate)j.onUpdate(z)}function l(a){return function(){Ic++||Sb();try{var b=a.apply(this,arguments)}finally{--Ic||Tb()}return b}}
function lc(a){G.startCompound();try{return a()}finally{G.endCompound()}}var j={},ec=k.defaults,ab;for(ab in ec)ec.hasOwnProperty(ab)&&(j[ab]=(b&&b.hasOwnProperty(ab)?b:ec)[ab]);var t=s("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");t.setAttribute("wrap","off");t.setAttribute("autocorrect","off");t.setAttribute("autocapitalize","off");var Aa=s("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),rc=s("div",null,"CodeMirror-scrollbar-inner"),
r=s("div",[rc],"CodeMirror-scrollbar"),Z=s("div"),rb=s("div",null,null,"position: relative; z-index: -1"),K=s("pre","\u00a0","CodeMirror-cursor"),yb=s("pre","\u00a0","CodeMirror-cursor","visibility: hidden"),Oa=s("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),w=s("div",[Oa,K,yb,rb,Z],null,"position: relative; z-index: 0"),La=s("div",null,"CodeMirror-gutter-text"),P=s("div",[La],"CodeMirror-gutter"),pb=s("div",[P,s("div",[w],"CodeMirror-lines")],
null,"position: relative"),la=s("div",[pb],null,"position: relative"),m=s("div",[la],"CodeMirror-scroll");m.setAttribute("tabIndex","-1");var N=s("div",[Aa,r,m],"CodeMirror"+(j.lineWrapping?" CodeMirror-wrap":""));a.appendChild?a.appendChild(N):a(N);zc();Ac();fc&&(t.style.width="0px");ob||(m.draggable=!0);w.style.outline="none";null!=j.tabindex&&(t.tabIndex=j.tabindex);j.autofocus&&V();!j.gutter&&!j.lineNumbers&&(P.style.display="none");gc&&(Aa.style.height="1px",Aa.style.position="absolute");Qc?
(r.style.zIndex=-2,r.style.visibility="hidden"):dc&&(r.style.minWidth="18px");try{lb()}catch(hc){throw hc.message.match(/runtime/i)&&(hc=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),hc;}var Rb=new ic,Pc=new ic,Pb,E,o=new Cb([new Db([new ba("")])]),ja,R;Ra();var i={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},da,Eb,Fb,oa=0,eb,qb=!1,gb=!1,pa,sb,fa,Ja,ta,Wa,ha,Xa,Ka=0,C=0,Q=0,xc=0,ra,ia=f(0),Ya=!1,mb=!0,yc={},Ha=!1,tb=null;l(function(){g(j.value||
"");pa=false})();var G=new Gb;q(m,"mousedown",l(function(a){function b(c){if(ob)m.draggable=false;eb=false;t();k();if(Math.abs(a.clientX-c.clientX)+Math.abs(a.clientY-c.clientY)<10){D(c);ua(h.line,h.ch,true);V()}}function c(a){if(p=="single")ca(h,a);else if(p=="double"){var b=Qa(a);A(a,s)?ca(b.from,w):ca(s,b.to)}else p=="triple"&&(A(a,s)?ca(w,v({line:a.line,ch:0})):ca(s,v({line:a.line+1,ch:0})))}function d(a){var b=Ua(a,true);if(b&&!u(b,o)){R||Ga();o=b;c(b);pa=false;var e=wa();if(b.line>=e.to||b.line<
e.from)r=setTimeout(l(function(){d(a)}),150)}}function f(a){clearTimeout(r);var b=Ua(a);b&&c(b);D(a);V();pa=true;ea();t()}Da(F(a,"shiftKey"));for(var g=a.target||a.srcElement;g!=N;g=g.parentNode)if(g.parentNode==la&&g!=pb)return;for(g=a.target||a.srcElement;g!=N;g=g.parentNode)if(g.parentNode==La){if(j.onGutterClick)j.onGutterClick(z,bb(La.childNodes,g)+C,a);return D(a)}var h=Ua(a);switch(Jc(a)){case 3:Ea&&Fc(a);return;case 2:h&&ua(h.line,h.ch,true);setTimeout(V,20);D(a);return}if(h){R||Ga();var g=
+new Date,p="single";if(Fb&&Fb.time>g-400&&u(Fb.pos,h)){p="triple";D(a);setTimeout(V,20);g=h.line;ca({line:g,ch:0},v({line:g+1,ch:0}))}else if(Eb&&Eb.time>g-400&&u(Eb.pos,h)){p="double";Fb={time:g,pos:h};D(a);g=Qa(h);ca(g.from,g.to)}else Eb={time:g,pos:h};var o=h,r;if(j.dragDrop&&jc&&!j.readOnly&&!u(i.from,i.to)&&!A(h,i.from)&&!A(i.to,h)&&p=="single"){if(ob)m.draggable=true;var t=q(document,"mouseup",l(b),true),k=q(m,"drop",l(b),true);eb=true;m.dragDrop&&m.dragDrop()}else{D(a);p=="single"&&ua(h.line,
h.ch,true);var s=i.from,w=i.to,ea=q(document,"mousemove",l(function(a){clearTimeout(r);D(a);!ya&&!Jc(a)?f(a):d(a)}),true),t=q(document,"mouseup",l(f),true)}}else(a.target||a.srcElement)==m&&D(a)}));q(m,"dblclick",l(function(a){for(var b=a.target||a.srcElement;b!=N;b=b.parentNode)if(b.parentNode==La)return D(a);D(a)}));q(w,"selectstart",D);Ea||q(m,"contextmenu",Fc);q(m,"scroll",function(){if(j.fixedGutter&&P.style.left!=m.scrollLeft+"px")P.style.left=m.scrollLeft+"px";if(m.scrollTop!=oa){oa=m.scrollTop;
if(r.scrollTop!=oa)r.scrollTop=oa;sa([])}if(j.onScroll)j.onScroll(z)});q(r,"scroll",function(){if(r.scrollTop!=oa){oa=m.scrollTop=r.scrollTop;sa([])}});q(r,"mousedown",function(){R&&setTimeout(V,0)});var Rc=q(window,"resize",function(){N.parentNode?sa(true):Rc()},!0);q(t,"keyup",l(function(a){if(!j.onKeyEvent||!j.onKeyEvent(z,Sa(a)))F(a,"keyCode")==16&&(da=null)}));q(t,"input",$a);q(t,"keydown",l(pc));q(t,"keypress",l(function(a){Ha&&ea();if(!j.onKeyEvent||!j.onKeyEvent(z,Sa(a))){var b=F(a,"keyCode"),
c=F(a,"charCode");if(qa&&b==Mb){Mb=null;D(a)}else if(!(qa&&(!a.which||a.which<10)||gc)||!B(a)){b=String.fromCharCode(c==null?b:c);j.electricChars&&E.electricChars&&j.smartIndent&&!j.readOnly&&E.electricChars.indexOf(b)>-1&&setTimeout(l(function(){xb(i.to.line,"smart")}),75);if(b=hb("'"+b+"'",j.extraKeys,j.keyMap,function(a){return Fa(a,true)})){D(a);ib()}b||$a()}}}));q(t,"focus",Ga);q(t,"blur",Ob);j.dragDrop&&(q(m,"dragstart",Mc),q(m,"dragenter",c),q(m,"dragover",c),q(m,"drop",l(p)));q(m,"paste",
function(){V();$a()});q(t,"paste",$a);q(t,"cut",l(function(){j.readOnly||aa("")}));gc&&q(la,"mouseup",function(){document.activeElement==t&&t.blur();V()});var Kc;try{Kc=document.activeElement==t}catch(Sc){}Kc||j.autofocus?setTimeout(Ga,20):Ob();var z=N.CodeMirror={getValue:function(a){var b=[];o.iter(0,o.size,function(a){b.push(a.text)});return b.join(a||"\n")},setValue:l(g),getSelection:fb,replaceSelection:l(aa),focus:function(){window.focus();V();Ga();$a()},setOption:function(a,b){var c=j[a];j[a]=
b;if(a=="mode"||a=="indentUnit")Ra();else if(a=="readOnly"&&b=="nocursor"){Ob();t.blur()}else a=="readOnly"&&!b?jb(true):a=="theme"?zc():a=="lineWrapping"&&c!=b?l(Ib)():a=="tabSize"?sa(true):a=="keyMap"&&Ac();if(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme"||a=="lineNumberFormatter"){c=j.gutter||j.lineNumbers;P.style.display=c?"":"none";c?ha=true:Z.parentNode.style.marginLeft=0;sa(true)}},getOption:function(a){return j[a]},undo:l(function(){qc(G.done,G.undone)}),redo:l(function(){qc(G.undone,
G.done)}),indentLine:l(function(a,b){typeof b!="string"&&(b=b==null?j.smartIndent?"smart":"prev":b?"add":"subtract");d(a)&&xb(a,b)}),indentSelection:l(function(a){if(u(i.from,i.to))return xb(i.from.line,a);for(var b=i.to.line-(i.to.ch?0:1),c=i.from.line;c<=b;++c)xb(c,a)}),historySize:function(){return{undo:G.done.length,redo:G.undone.length}},clearHistory:function(){G=new Gb},setHistory:function(a){G=new Gb;G.done=a.done;G.undone=a.undone},getHistory:function(){G.time=0;return{done:G.done.concat([]),
undone:G.undone.concat([])}},matchBrackets:l(function(){Gc(true)}),getTokenAt:l(function(a){a=v(a);return f(a.line).getTokenAt(E,nb(a.line),j.tabSize,a.ch)}),getStateAfter:function(a){a=vb(a==null?o.size-1:a);return nb(a+1)},cursorCoords:function(a,b){if(a==null)a=i.inverted;return this.charCoords(a?i.from:i.to,b)},charCoords:function(a,b){a=v(a);if(b=="local")return na(a,false);if(b=="div")return na(a,true);var c=na(a,true),d=Ma(w);return{x:d.left+c.x,y:d.top+c.y,yBot:d.top+c.yBot}},coordsChar:function(a){var b=
Ma(w);return Bb(a.x-b.left,a.y-b.top)},markText:l(Yb),setBookmark:function(a){var a=v(a),b=new Lc(a.ch);f(a.line).addMark(b);return b},findMarksAt:function(a){var a=v(a),b=[],c=f(a.line).marked;if(!c)return b;for(var d=0,g=c.length;d<g;++d){var h=c[d];if((h.from==null||h.from<=a.ch)&&(h.to==null||h.to>=a.ch))b.push(h.marker||h)}return b},setMarker:l(function(a,b,c){typeof a=="number"&&(a=f(vb(a)));a.gutterMarker={text:b,style:c};ha=true;return a}),clearMarker:l(function(a){typeof a=="number"&&(a=
f(vb(a)));a.gutterMarker=null;ha=true}),setLineClass:l(function(a,b,c){return Bc(a,function(a){if(a.className!=b||a.bgClassName!=c){a.className=b;a.bgClassName=c;return true}})}),hideLine:l(function(a){return Wb(a,true)}),showLine:l(function(a){return Wb(a,false)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!d(a))return null;a=f(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if(typeof a=="number"){if(!d(a))return null;var b=a,a=f(a);if(!a)return null}else{b=Na(a);
if(b==null)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}},getViewport:function(){return{from:C,to:Q}},addWidget:function(a,b,c,d,f){var a=na(v(a)),g=a.yBot,h=a.x;b.style.position="absolute";la.appendChild(b);if(d=="over")g=a.y;else if(d=="near"){var d=Math.max(m.offsetHeight,o.height*ka()),i=Math.max(la.clientWidth,w.clientWidth)-w.offsetLeft;a.yBot+b.offsetHeight>d&&a.y>b.offsetHeight&&
(g=a.y-b.offsetHeight);h+b.offsetWidth>i&&(h=i-b.offsetWidth)}b.style.top=g+w.offsetTop+"px";b.style.left=b.style.right="";if(f=="right"){h=la.clientWidth-b.offsetWidth;b.style.right="0px"}else{f=="left"?h=0:f=="middle"&&(h=(la.clientWidth-b.offsetWidth)/2);b.style.left=h+w.offsetLeft+"px"}c&&uc(h,g,h+b.offsetWidth,g+b.offsetHeight)},lineCount:function(){return o.size},clipPos:v,getCursor:function(a){if(a==null)a=i.inverted;return{line:(a?i.from:i.to).line,ch:(a?i.from:i.to).ch}},somethingSelected:function(){return!u(i.from,
i.to)},setCursor:l(function(a,b,c){b==null&&typeof a.line=="number"?ua(a.line,a.ch,c):ua(a,b,c)}),setSelection:l(function(a,b,c){(c?ca:Za)(v(a),v(b||a))}),getLine:function(a){if(d(a))return f(a).text},getLineHandle:function(a){if(d(a))return f(a)},setLine:l(function(a,b){d(a)&&I(b,{line:a,ch:0},{line:a,ch:f(a).text.length})}),removeLine:l(function(a){d(a)&&I("",{line:a,ch:0},v({line:a+1,ch:0}))}),replaceRange:l(I),getRange:function(a,b,c){return ga(v(a),v(b),c)},triggerOnKeyDown:l(pc),execCommand:function(a){return nc[a](z)},
moveH:l(function(a,b){var c=a<0?i.from:i.to;if(da||u(i.from,i.to))c=Ca(a,b);ua(c.line,c.ch,true)}),deleteH:l(function(a,b){u(i.from,i.to)?a<0?I("",Ca(a,b),i.to):I("",i.from,Ca(a,b)):I("",i.from,i.to);sb=true}),moveV:l(function(a,b){var c=na(i.inverted?i.from:i.to,true);if(tb!=null)c.x=tb;if(b=="page")var d=Math.min(m.clientHeight,window.innerHeight||document.documentElement.clientHeight),d=Bb(c.x,c.y+d*a);else if(b=="line"){d=ka();d=Bb(c.x,c.y+0.5*d+a*d)}if(b=="page")r.scrollTop=r.scrollTop+(na(d,
true).y-c.y);ua(d.line,d.ch,true);tb=c.x}),toggleOverwrite:function(){if(qb){qb=false;K.className=K.className.replace(" CodeMirror-overwrite","")}else{qb=true;K.className=K.className+" CodeMirror-overwrite"}},posFromIndex:function(a){var b=0,c;o.iter(0,o.size,function(d){d=d.text.length+1;if(d>a){c=a;return true}a=a-d;++b});return v({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;o.iter(0,a.line,function(a){b=b+(a.text.length+1)});return b},scrollTo:function(a,b){if(a!=
null)m.scrollLeft=a;if(b!=null)r.scrollTop=m.scrollTop=b;sa([])},getScrollInfo:function(){return{x:m.scrollLeft,y:r.scrollTop,height:r.scrollHeight,width:m.scrollWidth}},setSize:function(a,b){function c(a){a=String(a);return/^\d+$/.test(a)?a+"px":a}if(a!=null)N.style.width=c(a);if(b!=null)m.style.height=c(b);z.refresh()},operation:function(a){return l(a)()},compoundChange:function(a){return lc(a)},refresh:function(){sa(true,null,oa);if(r.scrollHeight>oa)r.scrollTop=oa},getInputField:function(){return t},
getWrapperElement:function(){return N},getScrollerElement:function(){return m},getGutterElement:function(){return P}},oc,Mb=null,ma="";Xb.prototype.clear=l(function(){for(var a=Infinity,b=-Infinity,c=0,d=this.set.length;c<d;++c){var f=this.set[c],g=f.marked;if(g&&f.parent){f=Na(f);a=Math.min(a,f);b=Math.max(b,f);for(f=0;f<g.length;++f)g[f].marker==this&&g.splice(f--,1)}}a!=Infinity&&fa.push({from:a,to:b+1})});Xb.prototype.find=function(){for(var a,b,c=0,d=this.set.length;c<d;++c)for(var f=this.set[c],
g=f.marked,h=0;h<g.length;++h){var i=g[h];if(i.marker==this&&(i.from!=null||i.to!=null)){var j=Na(f);if(j!=null){i.from!=null&&(a={line:j,ch:i.from});i.to!=null&&(b={line:j,ch:i.to})}}}return{from:a,to:b}};var $b,Cc,Pa,Ec,Dc=0,bc={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Ic=0,cb;for(cb in Hb)Hb.propertyIsEnumerable(cb)&&!z.propertyIsEnumerable(cb)&&(z[cb]=Hb[cb]);return z}function Lb(a){return"string"==typeof a?$[a]:a}function hb(a,b,c,d,f){function h(b){var b=Lb(b),c=b[a];if(!1===c)return f&&
f(),!0;if(null!=c&&d(c))return!0;if(b.nofallthrough)return f&&f(),!0;b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return h(b);for(var c=0,k=b.length;c<k;++c)if(h(b[c]))return!0;return!1}return b&&h(b)?!0:h(c)}function Ia(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var f=b[d];f instanceof Array&&(f=f.concat([]));c[d]=f}return c}function cc(a,b,c){return a.startState?a.startState(b,c):!0}function va(a,b){this.pos=
this.start=0;this.string=a;this.tabSize=b||8}function zb(a,b,c,d){this.from=a;this.to=b;this.style=c;this.marker=d}function Lc(a){this.to=this.from=a;this.line=null}function ba(a,b){this.styles=b||[a,null];this.text=a;this.height=1}function Ba(a,b,c,d){for(var f=0,h=0,g=0;h<b;f+=2){var p=c[f],k=h+p.length;0==g?(k>a&&d.push(p.slice(a-h,Math.min(p.length,b-h)),c[f+1]),k>=a&&(g=1)):1==g&&(k>b?d.push(p.slice(0,b-h),c[f+1]):d.push(p,c[f+1]));h=k}}function Db(a){this.lines=a;this.parent=null;for(var b=
0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function Cb(a){this.children=a;for(var b=0,c=0,d=0,f=a.length;d<f;++d){var h=a[d],b=b+h.chunkSize(),c=c+h.height;h.parent=this}this.size=b;this.height=c;this.parent=null}function Na(a){if(null==a.parent)return null;for(var b=a.parent,a=bb(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a}function Ub(a,b){var c=0;a:do{for(var d=0,f=a.children.length;d<f;++d){var h=a.children[d],
g=h.height;if(b<g){a=h;continue a}b-=g;c+=h.chunkSize()}return c}while(!a.lines);d=0;for(f=a.lines.length;d<f;++d){h=a.lines[d].height;if(b<h)break;b-=h}return c+d}function Vb(a,b){var c=0;a:do{for(var d=0,f=a.children.length;d<f;++d){var h=a.children[d],g=h.chunkSize();if(b<g){a=h;continue a}b-=g;c+=h.height}return c}while(!a.lines);for(d=0;d<b;++d)c+=a.lines[d].height;return c}function Gb(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=!1}function kc(){db(this)}function Sa(a){a.stop||
(a.stop=kc);return a}function D(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Ib(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function db(a){D(a);Ib(a)}function Jc(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Nb&&(a.ctrlKey&&1==b)&&(b=3);return b}function F(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function q(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),d)return function(){a.removeEventListener(b,
c,!1)}}else{var f=function(a){c(a||window.event)};a.attachEvent("on"+b,f);if(d)return function(){a.detachEvent("on"+b,f)}}}function ic(){this.id=null}function Ca(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,f=0;d<b;++d)"\t"==a.charAt(d)?f+=c-f%c:++f;return f}function Ma(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var f=document.documentElement||document.body.parentNode;null==f.scrollTop&&
(f=document.body);c.top+=f.scrollTop;c.left+=f.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c}function sc(a){fc?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function u(a,b){return a.line==b.line&&a.ch==b.ch}function A(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function s(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)Qa(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}
function za(a){a.innerHTML="";return a}function Qa(a,b){ac?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function bb(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function wb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}k.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,
onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var fc=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),
Nb=fc||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var Da=k.modes={},U=k.mimeModes={};k.defineMode=function(a,b){!k.defaults.mode&&"null"!=a&&(k.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}Da[a]=b};k.defineMIME=function(a,b){U[a]=b};k.resolveMode=function(a){if("string"==typeof a&&U.hasOwnProperty(a))a=U[a];else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return k.resolveMode("application/xml");
return"string"==typeof a?{name:a}:a||{name:"null"}};k.getMode=function(a,b){var b=k.resolveMode(b),c=Da[b.name];return!c?k.getMode(a,"text/plain"):c(a,b)};k.listModes=function(){var a=[],b;for(b in Da)Da.propertyIsEnumerable(b)&&a.push(b);return a};k.listMIMEs=function(){var a=[],b;for(b in U)U.propertyIsEnumerable(b)&&a.push({mime:b,mode:U[b]});return a};var Hb=k.extensions={};k.defineExtension=function(a,b){Hb[a]=b};var nc=k.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-
1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!u(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,
0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,
"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t",
"end")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},$=k.keyMap={};$.basic={Left:"goCharLeft",Right:"goCharRight",
Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};$.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight",
"Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};$.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight",
"Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};$["default"]=Nb?$.macDefault:$.pcDefault;$.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight",
"Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};k.fromTextArea=function(a,b){function c(){a.value=p.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(null==b.autofocus){var d=document.body;try{d=document.activeElement}catch(f){}b.autofocus=d==a||null!=
a.getAttribute("autofocus")&&d==document.body}if(a.form){var h=q(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var g=a.form.submit;a.form.submit=function Fa(){c();a.form.submit=g;a.form.submit();a.form.submit=Fa}}}a.style.display="none";var p=k(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);p.save=c;p.getTextArea=function(){return a};p.toTextArea=function(){c();a.parentNode.removeChild(p.getWrapperElement());a.style.display="";if(a.form){h();if(typeof a.form.submit=="function")a.form.submit=
g}};return p};var Ea=/gecko\/\d{7}/i.test(navigator.userAgent),ya=/MSIE \d/.test(navigator.userAgent),dc=/MSIE [1-7]\b/.test(navigator.userAgent),ac=/MSIE [1-8]\b/.test(navigator.userAgent),Oc=ya&&5==document.documentMode,ob=/WebKit\//.test(navigator.userAgent),mc=/Chrome\//.test(navigator.userAgent),qa=/Opera\//.test(navigator.userAgent),B=/Apple Computer/.test(navigator.vendor),gc=/KHTML\//.test(navigator.userAgent),Qc=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);k.copyState=Ia;k.startState=
cc;va.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return Ca(this.string,this.start,this.tabSize)},indentation:function(){return Ca(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=
this.string.slice(this.pos).match(a))&&!1!==b)this.pos+=a[0].length;return a}},current:function(){return this.string.slice(this.start,this.pos)}};k.StringStream=va;zb.prototype={attach:function(a){this.marker.set.push(a)},detach:function(a){a=bb(this.marker.set,a);-1<a&&this.marker.set.splice(a,1)},split:function(a,b){return this.to<=a&&null!=this.to?null:new zb(this.from<a||null==this.from?null:this.from-a+b,null==this.to?null:this.to-a+b,this.style,this.marker)},dup:function(){return new zb(null,
null,this.style,this.marker)},clipTo:function(a,b,c,d,f){a&&d>this.from&&(d<this.to||null==this.to)?this.from=null:null!=this.from&&this.from>=b&&(this.from=Math.max(d,this.from)+f);c&&(b<this.to||null==this.to)&&(b>this.from||null==this.from)?this.to=null:null!=this.to&&this.to>b&&(this.to=d<this.to?this.to+f:b)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(a){return this.marker==a.marker}};Lc.prototype={attach:function(a){this.line=a},detach:function(a){this.line==
a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,d,f){(a||b<this.from)&&(c||d>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(d,this.from)+f)},sameSet:function(){return!1},find:function(){return!this.line||!this.line.parent?null:{line:Na(this.line),ch:this.from}},clear:function(){if(this.line){var a=bb(this.line.marked,this);-1!=a&&this.line.marked.splice(a,
1);this.line=null}}};var Ra=" ";Ea||ya&&!dc?Ra="\u200b":qa&&(Ra="");ba.inheritMarks=function(a,b){var c=new ba(a),d=b&&b.marked;if(d)for(var f=0;f<d.length;++f)if(null==d[f].to&&d[f].style){var h=c.marked||(c.marked=[]),g=d[f].dup();h.push(g);g.attach(c)}return c};ba.prototype={replace:function(a,b,c){var d=[],f=this.marked,h=null==b?this.text.length:b;Ba(0,a,this.styles,d);c&&d.push(c,null);Ba(h,this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+c+this.text.slice(h);this.stateAfter=
null;if(f){c=c.length-(h-a);for(d=0;d<f.length;++d){var g=f[d];g.clipTo(null==a,a||0,null==b,h,c);g.isDead()&&(g.detach(this),f.splice(d--,1))}}},split:function(a,b){var c=[b,null],d=this.marked;Ba(a,this.text.length,this.styles,c);c=new ba(b+this.text.slice(a),c);if(d)for(var f=0;f<d.length;++f){var h=d[f],g=h.split(a,b.length);g&&(c.marked||(c.marked=[]),c.marked.push(g),g.attach(c),g==h&&d.splice(f--,1))}return c},append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text;
Ba(0,a.text.length,a.styles,this.styles);if(d)for(a=0;a<d.length;++a)null==d[a].to&&(d[a].to=b);if(c&&c.length){d||(this.marked=d=[]);a=0;a:for(;a<c.length;++a){var f=c[a];if(!f.from)for(var h=0;h<d.length;++h){var g=d[h];if(g.to==b&&g.sameSet(f)){g.to=null==f.to?null:f.to+b;g.isDead()&&(g.detach(this),c.splice(a--,1));continue a}}d.push(f);f.attach(this);f.from+=b;null!=f.to&&(f.to+=b)}}},fixMarkEnds:function(a){var b=this.marked,a=a.marked;if(b){var c=0;a:for(;c<b.length;++c){var d=b[c],f=null==
d.to;if(f&&a)for(var h=0;h<a.length;++h){var g=a[h];if(g.sameSet(d)&&null==g.from)if(d.from==this.text.length&&0==g.to){a.splice(h,1);b.splice(c--,1);continue a}else{f=!1;break}}f&&(d.to=this.text.length)}}},fixMarkStarts:function(){var a=this.marked;if(a)for(var b=0;b<a.length;++b)null==a[b].from&&(a[b].from=0)},addMark:function(a){a.attach(this);null==this.marked&&(this.marked=[]);this.marked.push(a);this.marked.sort(function(a,c){return(a.from||0)-(c.from||0)})},highlight:function(a,b,c){var c=
new va(this.text,c),d=this.styles,f=0,h=!1,g=d[0],p;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var k=a.token(c,b),s=this.text.slice(c.start,c.pos);c.start=c.pos;if(f&&d[f-1]==k)d[f-2]+=s;else if(s){if(!h&&(d[f+1]!=k||f&&d[f-2]!=p))h=!0;d[f++]=s;d[f++]=k;p=g;g=d[f]}if(5E3<c.pos){d[f++]=this.text.slice(c.pos);d[f++]=null;break}}d.length!=f&&(d.length=f,h=!0);f&&d[f-2]!=p&&(h=!0);return h||(5>d.length&&10>this.text.length?null:!1)},getTokenAt:function(a,b,c,d){for(c=new va(this.text,c);c.pos<
d&&!c.eol();){c.start=c.pos;var f=a.token(c,b)}return{start:c.start,end:c.pos,string:c.current(),className:f||null,state:b}},indentation:function(a){return Ca(this.text,null,a)},getElement:function(a,b,c){function d(b,c,d){if(c){h&&(ya&&" "==c.charAt(0))&&(c="\u00a0"+c.slice(1));h=!1;if(p.test(c))for(var f=document.createDocumentFragment(),k=0;;){p.lastIndex=k;var q=p.exec(c),u=q?q.index-k:c.length-k;u&&(f.appendChild(document.createTextNode(c.slice(k,k+u))),g+=u);if(!q)break;k+=u+1;"\t"==q[0]?(q=
a(g),f.appendChild(q.element.cloneNode(!0)),g+=q.width):(u=s("span","\u2022","cm-invalidchar"),u.title="\\u"+q[0].charCodeAt(0).toString(16),f.appendChild(u),g+=1)}else{g+=c.length;var f=document.createTextNode(c)}d?b.appendChild(s("span",[f],d)):b.appendChild(f)}}function f(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var h=!0,g=0,p=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,k=s("pre"),q=d;if(null!=b)var u=0,B=k.anchor=s("span"),q=function(a,f,g){var h=f.length;if(b>=u&&b<u+h){b>u&&(d(a,f.slice(0,
b-u),g),c&&a.appendChild(s("wbr")));a.appendChild(B);var k=b-u;d(B,qa?f.slice(k,k+1):f.slice(k),g);qa&&d(a,f.slice(k+1),g);b--;u+=h}else u+=h,d(a,f,g),u==b&&u==F?(Qa(B,Ra),a.appendChild(B)):u>b+10&&/\s/.test(f)&&(q=function(){})};var D=this.styles,A=this.text,L=this.marked,F=A.length;if(!A&&null==b)q(k," ");else if(!L||!L.length)for(L=A=0;L<F;A+=2){var J=D[A],$=D[A+1],T=J.length;L+T>F&&(J=J.slice(0,F-L));L+=T;q(k,J,f($))}else for(var A=J=0,T="",X=L[0].from||0,I=[],aa=0;J<F;){if(X==J){for(X=void 0;aa<
L.length&&((X=L[aa]).from==J||null==X.from);)null!=X.style&&I.push(X),++aa;for(var X=aa<L.length?L[aa].from:Infinity,Y=0;Y<I.length;++Y){var ga=I[Y].to;null==ga&&(ga=Infinity);ga==J?I.splice(Y--,1):X=Math.min(ga,X)}}for(Y=Math.min(F,X);;){if(T){for(var ga=J+T.length,U=$,ba=0;ba<I.length;++ba)U=(U?U+" ":"")+I[ba].style;q(k,ga>Y?T.slice(0,Y-J):T,U);if(ga>=Y){T=T.slice(Y-J);J=Y;break}J=ga}T=D[A++];$=f(D[A++])}}return k},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<
b;++a)this.marked[a].detach(this)}};Db.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,f=a+b;d<f;++d){var h=this.lines[d];this.height-=h.height;h.cleanUp();if(h.handlers)for(var g=0;g<h.handlers.length;++g)c.push(h.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<
c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Cb.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var f=this.children[d],h=f.chunkSize();if(a<h){var g=Math.min(b,h-a),k=f.height;f.remove(a,g,c);this.height-=k-f.height;h==g&&(this.children.splice(d--,1),f.parent=null);if(0==(b-=g))break;a=0}else a-=h}25>this.size-b&&(a=[],this.collapse(a),this.children=[new Db(a)],this.children[0].parent=
this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,f=b.length;d<f;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,f=this.children.length;d<f;++d){var h=this.children[d],g=h.chunkSize();if(a<=g){h.insertHeight(a,b,c);if(h.lines&&50<h.lines.length){for(;50<h.lines.length;)a=h.lines.splice(h.lines.length-25,25),a=new Db(a),h.height-=a.height,
this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Cb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=bb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Cb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,
c){for(var d=0,f=this.children.length;d<f;++d){var h=this.children[d],g=h.chunkSize();if(a<g){g=Math.min(b,g-a);if(h.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};Gb.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+new Date,f=this.done[this.done.length-1],h=f&&f[f.length-1],g=d-this.time;if(this.compound&&f&&!this.closed)f.push({start:a,added:b,old:c});else if(400<g||!h||this.closed||h.start>a+c.length||h.start+h.added<a)this.done.push([{start:a,added:b,old:c}]),this.closed=
!1;else{for(var f=Math.max(0,h.start-a),g=Math.max(0,a+c.length-(h.start+h.added)),k=f;0<k;--k)h.old.unshift(c[k-1]);for(k=g;0<k;--k)h.old.push(c[c.length-k]);f&&(h.start=a);h.added+=b-(c.length-f-g)}this.time=d},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}};k.e_stop=db;k.e_preventDefault=D;k.e_stopPropagation=Ib;k.connect=q;ic.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var Kb=k.Pass={toString:function(){return"CodeMirror.Pass"}},
jc;if(ac)jc=!1;else{var wa=s("div");jc="draggable"in wa||"dragDrop"in wa}wa=s("textarea");wa.value="foo\nbar";wa.value.indexOf("\r");var Ab=/^$/;Ea?Ab=/$'/:B?Ab=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:mc&&(Ab=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);k.setTextContent=Qa;var Ta=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var f=a.indexOf("\n",b);-1==f&&(f=a.length);var h=a.slice(b,"\r"==a.charAt(f-1)?f-1:f),g=h.indexOf("\r");-1!=
g?(c.push(h.slice(0,g)),b+=g+1):(c.push(h),b=f+1)}return c}:function(a){return a.split(/\r\n?|\n/)};k.splitLines=Ta;var Nc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)};k.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});k.defineMIME("text/plain","null");var xa={3:"Enter",8:"Backspace",
9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};
k.keyNames=xa;for(B=0;10>B;B++)xa[B+48]=String(B);for(B=65;90>=B;B++)xa[B]=String.fromCharCode(B);for(B=1;12>=B;B++)xa[B+111]=xa[B+63235]="F"+B;return k}();